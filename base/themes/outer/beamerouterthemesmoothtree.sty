% Copyright 2007 by Till Tantau
% Copyright 2015 by Vedran Mileti\'c, Joseph Wright
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\mode<presentation>

\setbeamercolor{frametitle}{parent=palette primary}

\AtBeginDocument{
  {
    \usebeamerfont*{headline}

    \usebeamercolor{normal text}
    \usebeamercolor{title in head/foot}
    \usebeamercolor{subsection in head/foot}
    \usebeamercolor{section in head/foot}
    \usebeamercolor{frametitle}

    \pgfdeclareverticalshading{beamer@treeshade}{\the\paperwidth}{%
      color(0ex)=(normal text.bg);%
      color(1ex)=(subsection in head/foot.bg);%
      color(3.25ex)=(subsection in head/foot.bg);%
      color(4.25ex)=(section in head/foot.bg);%
      color(6.5ex)=(section in head/foot.bg);%
      color(7.5ex)=(title in head/foot.bg);%
      color(10.25ex)=(title in head/foot.bg)%
    }
    
    \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
      color(0ex)=(frametitle.bg);%
      color(1ex)=(frametitle.bg);%
      color(2ex)=(subsection in head/foot.bg)
    }

    \pgfdeclareverticalshading{beamer@belowframetitle}{\the\paperwidth}{%
      color(0ex)=(normal text.bg);%
      color(1ex)=(frametitle.bg)
    }
  }
}

\defbeamertemplate*{headline}{smoothtree theme}
{%
  \pgfuseshading{beamer@treeshade}%
  \vskip-10.25ex%
  \begin{beamercolorbox}[wd=\paperwidth,ht=2.125ex,dp=1.125ex,ignorebg,%
    leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}
    \usebeamerfont{title in head/foot}\insertshorttitle
  \end{beamercolorbox}
  \begin{beamercolorbox}[wd=\paperwidth,ht=2.125ex,dp=1.125ex,ignorebg,%
    leftskip=.3cm,rightskip=.3cm plus1fil]{section in head/foot}
    \usebeamerfont{section in head/foot}%
    \hskip6pt\insertsectionhead
  \end{beamercolorbox}
  \begin{beamercolorbox}[wd=\paperwidth,ht=2.125ex,dp=1.125ex,ignorebg,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{subsection in head/foot}
    \usebeamerfont{subsection in head/foot}%
    \hskip12pt\insertsubsectionhead
  \end{beamercolorbox}
}

\defbeamertemplate*{frametitle}{smoothtree theme}
{%
  \nointerlineskip%
  \usebeamerfont{headline}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=1.5ex,dp=0ex]{empty}
    \pgfuseshading{beamer@aboveframetitle}%
  \end{beamercolorbox}%
  \vskip-.5ex%
  \nointerlineskip%
  \begin{beamercolorbox}[wd=\paperwidth,leftskip=.935cm,rightskip=.3cm plus1fil]{frametitle}
    \usebeamerfont*{frametitle}\insertframetitle%
      \ifx\insertframesubtitle\@empty%
        \strut\par%
      \else
        \par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}%
      \fi%%
    \usebeamerfont{headline}%
    \vskip.5ex  
  \end{beamercolorbox}%
  \nointerlineskip
  \begin{beamercolorbox}[wd=\paperwidth,ht=.5ex,dp=0ex]{empty}
    \pgfuseshading{beamer@belowframetitle}%
  \end{beamercolorbox}%
}
  
  
\mode
<all>
